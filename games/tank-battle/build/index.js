var o=Object.defineProperty;var l=(h,a,e)=>a in h?o(h,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):h[a]=e;var t=(h,a,e)=>(l(h,typeof a!="symbol"?a+"":a,e),e);var r=class extends Phaser.Scene{constructor(){super({key:"Main"});t(this,"player");t(this,"bullets");t(this,"enemies");t(this,"obstacles");t(this,"base");t(this,"keys");t(this,"score",0);t(this,"scoreText");t(this,"gameOver",!1);t(this,"enemySpawnTimer",null)}preload(){this.load.setBaseURL("https://cdn.jsdelivr.net/npm/phaser3@3.60.0/dist/resources"),this.load.image("player-tank","https://cdn.jsdelivr.net/gh/photonstorm/phaser3vibes@main/assets/sprites/phaser3-logo.png"),this.load.image("enemy-tank","https://cdn.jsdelivr.net/gh/photonstorm/phaser3vibes@main/assets/particles/particle.png"),this.load.image("bullet","https://cdn.jsdelivr.net/gh/photonstorm/phaser3vibes@main/assets/particles/particle.png"),this.load.image("obstacle","https://cdn.jsdelivr.net/gh/photonstorm/phaser3vibes@main/assets/tilesets/brick.png"),this.load.image("base","https://cdn.jsdelivr.net/gh/photonstorm/phaser3vibes@main/assets/tilesets/brick.png"),this.load.image("enemy-icon","https://cdn.jsdelivr.net/gh/photonstorm/phaser3vibes@main/assets/particles/particle.png")}create(){this.physics.world.setBounds(0,0,1024,768),this.obstacles=this.physics.add.staticGroup();for(let s=0;s<5;s++)for(let i=0;i<8;i++)Math.random()>.5&&this.obstacles.create(128+i*128,128+s*96,"obstacle").setDisplaySize(64,64);this.player=this.physics.add.image(512,650,"player-tank"),this.player.setCollideWorldBounds(!0),this.player.setDepth(10),this.bullets=this.physics.add.group(),this.enemies=this.physics.add.group(),this.base=this.physics.add.image(512,720,"base"),this.base.setCollideWorldBounds(!0),this.base.setDepth(5),this.keys=this.input.keyboard.createCursorKeys();let e=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE);this.scoreText=this.add.text(16,16,"Score: 0",{fontSize:"24px",color:"#000"}),this.enemySpawnTimer=this.time.addEvent({delay:2e3,callback:this.spawnEnemy,callbackScope:this,loop:!0}),this.physics.add.collider(this.player,this.obstacles),this.physics.add.collider(this.enemies,this.obstacles),this.physics.add.collider(this.base,this.obstacles),this.physics.add.collider(this.player,this.base),this.physics.add.overlap(this.bullets,this.enemies,this.hitEnemy,null,this),this.physics.add.overlap(this.bullets,this.obstacles,this.hitObstacle,null,this),this.physics.add.overlap(this.enemies,this.base,this.hitBase,null,this),this.physics.add.overlap(this.enemies,this.player,this.hitPlayer,null,this),this.cameras.main.startFollow(this.player)}update(){if(this.gameOver)return;let e=200;this.keys.left.isDown?this.player.setVelocityX(-e):this.keys.right.isDown?this.player.setVelocityX(e):this.player.setVelocityX(0),this.keys.up.isDown?this.player.setVelocityY(-e):this.keys.down.isDown?this.player.setVelocityY(e):this.player.setVelocityY(0),this.keys.space&&Phaser.Input.Keyboard.JustDown(this.keys.space)&&this.shoot()}shoot(){let e=this.bullets.create(this.player.x,this.player.y,"bullet");e.setDisplaySize(10,10),e.setDepth(11);let s=Phaser.Math.Vector2.ZERO;this.keys.up.isDown?s=new Phaser.Math.Vector2(0,-300):this.keys.down.isDown?s=new Phaser.Math.Vector2(0,300):this.keys.left.isDown?s=new Phaser.Math.Vector2(-300,0):this.keys.right.isDown?s=new Phaser.Math.Vector2(300,0):s=new Phaser.Math.Vector2(0,-300),e.setVelocity(s.x,s.y),this.time.delayedCall(1e3,()=>{e.active&&e.destroy()})}spawnEnemy(){if(this.gameOver)return;let e=Math.random()>.5?0:1024,s=Math.random()*600+50,i=this.enemies.create(e,s,"enemy-tank");i.setDisplaySize(64,64),i.setCollideWorldBounds(!0),i.setDepth(9),i.health=2,this.physics.add.overlap(i,this.bullets,this.hitEnemyByPlayer,null,this)}hitEnemy(e,s){e.destroy(),s.health--,s.health<=0&&(s.destroy(),this.score+=100,this.scoreText.setText(`Score: ${this.score}`))}hitEnemyByPlayer(e,s){this.hitEnemy(s,e)}hitObstacle(e){e.destroy()}hitBase(e){e.destroy(),this.gameOver=!0,this.add.text(512,384,"GAME OVER",{fontSize:"48px",fill:"#ff0000",fontStyle:"bold"}).setOrigin(.5),this.add.text(512,450,`Final Score: ${this.score}`,{fontSize:"32px",fill:"#000"}).setOrigin(.5),this.add.text(512,500,"Press SPACE to restart",{fontSize:"24px",fill:"#000"}).setOrigin(.5),this.input.keyboard.once("keydown-SPACE",()=>{this.scene.restart()}),this.enemySpawnTimer&&this.enemySpawnTimer.remove()}hitPlayer(e){e.destroy(),this.gameOver=!0,this.add.text(512,384,"GAME OVER",{fontSize:"48px",fill:"#ff0000",fontStyle:"bold"}).setOrigin(.5),this.add.text(512,450,`Final Score: ${this.score}`,{fontSize:"32px",fill:"#000"}).setOrigin(.5),this.add.text(512,500,"Press SPACE to restart",{fontSize:"24px",fill:"#000"}).setOrigin(.5),this.input.keyboard.once("keydown-SPACE",()=>{this.scene.restart()}),this.enemySpawnTimer&&this.enemySpawnTimer.remove()}},c={type:Phaser.AUTO,width:1024,height:768,parent:"game-container",backgroundColor:"#87CEEB",scene:[r],physics:{default:"arcade",arcade:{gravity:{y:0},debug:!1}}},p=new Phaser.Game(c);
