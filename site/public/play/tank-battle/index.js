var c=Object.defineProperty;var d=(n,h,e)=>h in n?c(n,h,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[h]=e;var i=(n,h,e)=>(d(n,typeof h!="symbol"?h+"":h,e),e);var l=class extends Phaser.Scene{constructor(){super({key:"Main"});i(this,"player");i(this,"bullets");i(this,"enemies");i(this,"obstacles");i(this,"base");i(this,"keys");i(this,"score",0);i(this,"scoreText");i(this,"gameOver",!1);i(this,"enemySpawnTimer",null)}preload(){this.load.setBaseURL("https://cdn.jsdelivr.net/npm/phaser3@3.60.0/dist/resources"),this.load.image("player-tank","https://cdn.jsdelivr.net/gh/photonstorm/phaser3vibes@main/assets/sprites/phaser3-logo.png"),this.load.image("enemy-tank","https://cdn.jsdelivr.net/gh/photonstorm/phaser3vibes@main/assets/particles/particle.png"),this.load.image("bullet","https://cdn.jsdelivr.net/gh/photonstorm/phaser3vibes@main/assets/particles/particle.png"),this.load.image("obstacle","https://cdn.jsdelivr.net/gh/photonstorm/phaser3vibes@main/assets/tilesets/brick.png"),this.load.image("base","https://cdn.jsdelivr.net/gh/photonstorm/phaser3vibes@main/assets/tilesets/brick.png"),this.load.image("enemy-icon","https://cdn.jsdelivr.net/gh/photonstorm/phaser3vibes@main/assets/particles/particle.png")}create(){var t,o;this.physics.world.setBounds(0,0,1024,768),this.obstacles=this.physics.add.staticGroup();for(let a=0;a<5;a++)for(let r=0;r<8;r++)Math.random()>.5&&this.obstacles.create(128+r*128,128+a*96,"obstacle").setDisplaySize(64,64);this.player=this.physics.add.image(512,650,"player-tank"),this.player.setCollideWorldBounds(!0),this.player.setDepth(10),this.bullets=this.physics.add.group(),this.enemies=this.physics.add.group(),this.base=this.physics.add.image(512,720,"base"),this.base.setCollideWorldBounds(!0),this.base.setDepth(5);let e=(t=this.input.keyboard)==null?void 0:t.createCursorKeys(),s=(o=this.input.keyboard)==null?void 0:o.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE);if(!e||!s){console.error("Keyboard initialization failed");return}this.keys=e,this.keys.space=s,this.scoreText=this.add.text(16,16,"Score: 0",{fontSize:"24px",color:"#ffffff"}),this.enemySpawnTimer=this.time.addEvent({delay:2e3,callback:this.spawnEnemy,callbackScope:this,loop:!0}),this.physics.add.collider(this.player,this.obstacles),this.physics.add.collider(this.enemies,this.obstacles),this.physics.add.collider(this.base,this.obstacles),this.physics.add.collider(this.player,this.base),this.physics.add.overlap(this.bullets,this.enemies,this.hitEnemy,void 0,this),this.physics.add.overlap(this.bullets,this.obstacles,this.hitObstacle,void 0,this),this.physics.add.overlap(this.enemies,this.base,this.hitBase,void 0,this),this.physics.add.overlap(this.enemies,this.player,this.hitPlayer,void 0,this),this.cameras.main.startFollow(this.player)}update(){var t,o,a,r;if(this.gameOver)return;let e=200;(t=this.keys.left)!=null&&t.isDown?this.player.setVelocityX(-e):(o=this.keys.right)!=null&&o.isDown?this.player.setVelocityX(e):this.player.setVelocityX(0),(a=this.keys.up)!=null&&a.isDown?this.player.setVelocityY(-e):(r=this.keys.down)!=null&&r.isDown?this.player.setVelocityY(e):this.player.setVelocityY(0);let s=this.keys.space;s&&Phaser.Input.Keyboard.JustDown(s)&&this.shoot()}shoot(){var t,o,a,r;let e=this.bullets.create(this.player.x,this.player.y,"bullet");e.setDisplaySize(10,10),e.setDepth(11);let s=new Phaser.Math.Vector2(0,-300);(t=this.keys.up)!=null&&t.isDown?s=new Phaser.Math.Vector2(0,-300):(o=this.keys.down)!=null&&o.isDown?s=new Phaser.Math.Vector2(0,300):(a=this.keys.left)!=null&&a.isDown?s=new Phaser.Math.Vector2(-300,0):(r=this.keys.right)!=null&&r.isDown?s=new Phaser.Math.Vector2(300,0):s=new Phaser.Math.Vector2(0,-300),e.setVelocity(s.x,s.y),this.time.delayedCall(1e3,()=>{e.active&&e.destroy()})}spawnEnemy(){if(this.gameOver)return;let e=Math.random()>.5?0:1024,s=Math.random()*600+50,t=this.enemies.create(e,s,"enemy-tank");t.setDisplaySize(64,64),t.setCollideWorldBounds(!0),t.setDepth(9),t.health=2,this.physics.add.overlap(t,this.bullets,this.hitEnemyByPlayer,void 0,this)}hitEnemy(e,s){e.destroy(),s.health--,s.health<=0&&(s.destroy(),this.score+=100,this.scoreText.setText(`Score: ${this.score}`))}hitEnemyByPlayer(e,s){this.hitEnemy(s,e)}hitObstacle(e){e.destroy()}hitBase(e){e.destroy(),this.gameOver=!0,this.add.text(512,384,"GAME OVER",{fontSize:"48px",color:"#ff0000",fontStyle:"bold"}).setOrigin(.5),this.add.text(512,450,`Final Score: ${this.score}`,{fontSize:"32px",color:"#000"}).setOrigin(.5),this.add.text(512,500,"Press SPACE to restart",{fontSize:"24px",color:"#000"}).setOrigin(.5);let s=this.input.keyboard;s&&s.once("keydown-SPACE",()=>{this.scene.restart()}),this.enemySpawnTimer!==null&&this.enemySpawnTimer.remove()}hitPlayer(e){e.destroy(),this.gameOver=!0,this.add.text(512,384,"GAME OVER",{fontSize:"48px",color:"#ff0000",fontStyle:"bold"}).setOrigin(.5),this.add.text(512,450,`Final Score: ${this.score}`,{fontSize:"32px",color:"#000"}).setOrigin(.5),this.add.text(512,500,"Press SPACE to restart",{fontSize:"24px",color:"#000"}).setOrigin(.5);let s=this.input.keyboard;s&&s.once("keydown-SPACE",()=>{this.scene.restart()}),this.enemySpawnTimer!==null&&this.enemySpawnTimer.remove()}},y={type:Phaser.AUTO,width:1024,height:768,parent:"game-container",backgroundColor:"#87CEEB",scene:[l],physics:{default:"arcade",arcade:{gravity:{y:0},debug:!1}}},b=new Phaser.Game(y);
